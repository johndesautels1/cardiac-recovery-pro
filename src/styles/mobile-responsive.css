/* ============================================================================
   MOBILE RESPONSIVE DESIGN ENHANCEMENTS
   ============================================================================
   Optimized for phones and tablets
   Last Updated: Oct 20, 2025
   ============================================================================ */

/* ========================================================================
   MOBILE-FIRST BREAKPOINTS
   ======================================================================== */

/* Small phones (320px - 480px) */
@media (max-width: 480px) {
    body {
        font-size: 14px !important;
    }

    .container {
        padding: 10px !important;
        max-width: 100% !important;
    }

    .header h1 {
        font-size: 1.5rem !important;
    }

    /* Tabs horizontal scroll on small screens */
    .tabs {
        overflow-x: auto !important;
        overflow-y: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        scrollbar-width: none !important;
        white-space: nowrap !important;
        padding: 10px 5px !important;
    }

    .tabs::-webkit-scrollbar {
        display: none !important;
    }

    .tab-button {
        font-size: 0.75rem !important;
        padding: 8px 12px !important;
        display: inline-block !important;
        white-space: nowrap !important;
    }

    /* Cards stack on small screens */
    .card,
    .metrics-card {
        margin: 10px 0 !important;
        padding: 12px !important;
    }

    /* Form inputs full width */
    input,
    select,
    textarea {
        width: 100% !important;
        font-size: 16px !important; /* Prevents zoom on iOS */
        padding: 12px !important;
        margin-bottom: 10px !important;
    }

    /* Buttons full width on mobile */
    .btn,
    .btn-good,
    .btn-danger,
    button {
        width: 100% !important;
        padding: 12px !important;
        font-size: 1rem !important;
        margin-bottom: 10px !important;
        touch-action: manipulation !important;
        min-height: 44px !important; /* iOS touch target */
    }

    /* Tables horizontal scroll */
    .table-container {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    table {
        font-size: 0.75rem !important;
        min-width: 600px !important;
    }

    th, td {
        padding: 6px 4px !important;
        white-space: nowrap !important;
    }

    /* Charts responsive sizing */
    canvas {
        max-width: 100% !important;
        height: auto !important;
    }

    .chart-container {
        padding: 10px !important;
        margin: 10px 0 !important;
    }

    /* Profile photo smaller on mobile */
    #userPhoto {
        width: 60px !important;
        height: 60px !important;
        font-size: 1.5rem !important;
    }

    /* Date navigation compact */
    .date-nav {
        gap: 5px !important;
    }

    .nav-btn {
        padding: 8px 10px !important;
        font-size: 0.85rem !important;
    }

    /* Grid layouts single column */
    .stat-grid,
    .metrics-grid {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }

    /* Bottom nav always visible on mobile */
    .bottom-nav {
        display: flex !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: 1000 !important;
        padding-bottom: env(safe-area-inset-bottom) !important;
    }

    .bottom-nav-item {
        font-size: 0.7rem !important;
        padding: 8px 4px !important;
    }

    .bottom-nav-icon {
        font-size: 1.2rem !important;
    }

    /* Hide desktop tabs on mobile */
    .tabs {
        display: none !important;
    }
}

/* ========================================================================
   TABLETS (481px - 768px)
   ======================================================================== */

@media (min-width: 481px) and (max-width: 768px) {
    .container {
        padding: 15px !important;
    }

    /* 2 column grid on tablets */
    .stat-grid,
    .metrics-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 15px !important;
    }

    .tab-button {
        font-size: 0.9rem !important;
        padding: 10px 15px !important;
    }

    /* Show bottom nav on tablets too */
    .bottom-nav {
        display: flex !important;
    }

    input,
    select,
    textarea {
        font-size: 16px !important; /* Prevents zoom */
    }

    .btn {
        min-height: 44px !important;
    }

    /* Charts better sizing */
    .chart-container {
        padding: 15px !important;
    }

    table {
        font-size: 0.85rem !important;
    }
}

/* ========================================================================
   LANDSCAPE MODE (phones & tablets)
   ======================================================================== */

@media (max-height: 500px) and (orientation: landscape) {
    .header {
        padding: 10px 0 !important;
    }

    .header h1 {
        font-size: 1.2rem !important;
    }

    .card {
        padding: 10px !important;
        margin: 8px 0 !important;
    }

    /* Reduce vertical spacing in landscape */
    .stat-grid,
    .metrics-grid {
        gap: 8px !important;
    }

    /* Smaller charts in landscape */
    canvas {
        max-height: 200px !important;
    }
}

/* ========================================================================
   TOUCH-FRIENDLY ENHANCEMENTS
   ======================================================================== */

/* Larger touch targets */
button,
.btn,
a,
.tab-button,
.bottom-nav-item {
    min-height: 44px !important;
    min-width: 44px !important;
}

/* Remove hover effects on touch devices */
@media (hover: none) and (pointer: coarse) {
    button:hover,
    .btn:hover,
    .tab-button:hover {
        transform: none !important;
    }

    /* Add active/pressed state instead */
    button:active,
    .btn:active,
    .tab-button:active {
        opacity: 0.7 !important;
        transform: scale(0.98) !important;
    }
}

/* ========================================================================
   SAFE AREA INSETS (iPhone notch, etc.)
   ======================================================================== */

@supports (padding: env(safe-area-inset-bottom)) {
    body {
        padding-top: env(safe-area-inset-top) !important;
        padding-bottom: env(safe-area-inset-bottom) !important;
    }

    .header {
        padding-top: calc(10px + env(safe-area-inset-top)) !important;
    }

    .bottom-nav {
        padding-bottom: calc(10px + env(safe-area-inset-bottom)) !important;
    }

    .container {
        padding-left: max(10px, env(safe-area-inset-left)) !important;
        padding-right: max(10px, env(safe-area-inset-right)) !important;
    }
}

/* ========================================================================
   PULL TO REFRESH ENHANCEMENT
   ======================================================================== */

.pull-to-refresh {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 60px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: var(--card) !important;
    transform: translateY(-100%) !important;
    transition: transform 0.3s ease !important;
    z-index: 999 !important;
}

.pull-to-refresh.active {
    transform: translateY(0) !important;
}

#refreshIcon {
    font-size: 2rem !important;
    animation: spin 1s linear infinite !important;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ========================================================================
   MODAL/DIALOG OPTIMIZATION
   ======================================================================== */

@media (max-width: 768px) {
    .modal-overlay {
        padding: 10px !important;
    }

    .modal-content {
        max-width: 100% !important;
        max-height: 90vh !important;
        overflow-y: auto !important;
    }

    .alert-box {
        width: 95% !important;
        max-width: 400px !important;
    }
}

/* ========================================================================
   VIDEO CARDS RESPONSIVE
   ======================================================================== */

@media (max-width: 768px) {
    .video-grid {
        grid-template-columns: 1fr !important;
    }

    .video-card {
        margin: 10px 0 !important;
    }

    iframe {
        width: 100% !important;
        height: 200px !important;
    }
}

/* ========================================================================
   INSTALL PROMPT MOBILE
   ======================================================================== */

@media (max-width: 768px) {
    .install-prompt {
        bottom: 80px !important; /* Above bottom nav */
        left: 10px !important;
        right: 10px !important;
        width: auto !important;
    }

    .install-prompt-content {
        padding: 12px !important;
    }

    .install-prompt-title {
        font-size: 0.9rem !important;
    }

    .install-prompt-text {
        font-size: 0.75rem !important;
    }

    .install-btn,
    .dismiss-btn {
        font-size: 0.85rem !important;
        padding: 8px 16px !important;
    }
}

/* ========================================================================
   SESSION CARDS MOBILE
   ======================================================================== */

@media (max-width: 768px) {
    .session-card {
        padding: 12px !important;
    }

    .session-header {
        font-size: 0.9rem !important;
    }

    .session-details {
        font-size: 0.8rem !important;
    }
}

/* ========================================================================
   FORM LAYOUT MOBILE
   ======================================================================== */

@media (max-width: 768px) {
    .form-row {
        flex-direction: column !important;
    }

    .form-group {
        width: 100% !important;
        margin-bottom: 15px !important;
    }

    label {
        display: block !important;
        margin-bottom: 5px !important;
        font-weight: 600 !important;
    }

    /* BP input side-by-side even on mobile */
    .bp-inputs {
        display: flex !important;
        gap: 10px !important;
    }

    .bp-inputs input {
        flex: 1 !important;
    }
}

/* ========================================================================
   TEXT READABILITY
   ======================================================================== */

@media (max-width: 768px) {
    h1 { font-size: 1.5rem !important; }
    h2 { font-size: 1.3rem !important; }
    h3 { font-size: 1.1rem !important; }
    h4 { font-size: 1rem !important; }

    p, li, span {
        line-height: 1.5 !important;
    }

    /* Prevent text overflow */
    * {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
    }
}

/* ========================================================================
   THEME TOGGLE MOBILE
   ======================================================================== */

@media (max-width: 768px) {
    .theme-toggle {
        top: 10px !important;
        right: 10px !important;
        padding: 8px 12px !important;
        font-size: 0.85rem !important;
    }

    #themeIcon {
        font-size: 1.2rem !important;
    }
}

/* ========================================================================
   ACCESSIBILITY - LARGER TEXT MODE
   ======================================================================== */

@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .btn,
    button {
        border: 2px solid currentColor !important;
    }

    .card {
        border: 1px solid currentColor !important;
    }
}

/* ========================================================================
   HORIZONTAL SCROLL INDICATORS
   ======================================================================== */

@media (max-width: 768px) {
    .tabs::after,
    .table-container::after {
        content: '→' !important;
        position: absolute !important;
        right: 0 !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        padding: 5px !important;
        background: linear-gradient(to right, transparent, var(--bg)) !important;
        pointer-events: none !important;
    }

    .tabs.scrolled-to-end::after,
    .table-container.scrolled-to-end::after {
        display: none !important;
    }
}

/* ========================================================================
   LOADING STATES
   ======================================================================== */

.loading-spinner {
    display: inline-block !important;
    width: 30px !important;
    height: 30px !important;
    border: 3px solid var(--muted) !important;
    border-top-color: var(--accent) !important;
    border-radius: 50% !important;
    animation: spin 1s linear infinite !important;
}

@media (max-width: 768px) {
    .loading-spinner {
        width: 25px !important;
        height: 25px !important;
        border-width: 2px !important;
    }
}

/* End of Mobile Responsive Styles */
